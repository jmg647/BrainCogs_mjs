%clearvars

dataDir = "X:\michael\tactile2visual\results\mjs_tactile2visual";
dataFiles = ...
    ["mjs20_09.mat",...
    "mjs20_10.mat",...
    "mjs20_11.mat",...
    "mjs20_12.mat",...
    "mjs20_13.mat",...
    "mjs20_14.mat",...
    "mjs20_15.mat",...
    "mjs20_16.mat",...
    "mjs20_17.mat",...
    "mjs20_18.mat",...
    "mjs20_19.mat",...
     "mjs20_20.mat",...
    "mjs20_410.mat",...
    "mjs20_411.mat",...
    "mjs20_412.mat",...
    "mjs20_413.mat"];

for i=1:numel(dataFiles)
    subjects(i)=load(fullfile(dataDir,dataFiles(i)),'sessions');
end
%%
for i=1:numel(subjects)
    S = subjects(i).sessions;
    sensorySessions = S([S.sessionType]=="Sensory");
altSessions = S([S.sessionType]=="Alternation");
     nSessionsSensory = find([sensorySessions.pCorrect]>0.75,1,"Last");
     nSessionsAlt = find([altSessions.pCorrect]>0.75,1,"first");
       
    sensory2Crit(i) = nSessionsSensory; 
    if ~isempty(nSessionsAlt)
        alt2Crit(i) = nSessionsAlt;
        sensory2Crit(i) = nSessionsSensory; 
    else
        alt2Crit(i)=NaN;
    end
end

totalSessions = alt2Crit(~isnan(alt2Crit))+sensory2Crit(~isnan(alt2Crit));
meanSessions = mean(totalSessions);
semSessions = std(totalSessions)/sqrt(numel(totalSessions));